# 기술 스택 감지 패턴
# 이 파일은 package.json dependencies를 기반으로 프레임워크와 라이브러리를 자동 감지하는 규칙을 정의합니다.

frontend_frameworks:
  react:
    packages: ['react', 'react-dom']
    confidence: high
  vue:
    packages: ['vue']
    confidence: high
  angular:
    packages: ['@angular/core']
    confidence: high
  svelte:
    packages: ['svelte']
    confidence: high
  next:
    packages: ['next']
    confidence: high
    note: "Next.js는 풀스택 프레임워크이므로 frontend와 backend 둘 다 해당"

backend_frameworks:
  nestjs:
    packages: ['@nestjs/core']
    confidence: high
  express:
    packages: ['express']
    confidence: medium
    note: "Express는 매우 범용적이므로 다른 지표와 함께 확인 필요"
  fastify:
    packages: ['fastify']
    confidence: high
  koa:
    packages: ['koa']
    confidence: high
  next:
    packages: ['next']
    confidence: high
    note: "API routes를 사용하는 경우 backend로도 간주"

state_management:
  jotai:
    packages: ['jotai']
    type: 'atomic'
  redux:
    packages: ['redux', '@reduxjs/toolkit']
    type: 'flux'
  zustand:
    packages: ['zustand']
    type: 'atomic'
  mobx:
    packages: ['mobx', 'mobx-react-lite']
    type: 'reactive'
  recoil:
    packages: ['recoil']
    type: 'atomic'
  apollo:
    packages: ['@apollo/client']
    type: 'graphql-client'
  react-query:
    packages: ['@tanstack/react-query', 'react-query']
    type: 'server-state'

api_styles:
  graphql:
    indicators:
      - packages: ['graphql', '@apollo/server', '@apollo/client']
      - files: ['*.graphql', '*.gql', 'schema.graphql']
  rest:
    indicators:
      - packages: ['express', 'fastify', 'koa']
      - note: "GraphQL이 없고 HTTP 서버가 있으면 REST로 간주"
  trpc:
    indicators:
      - packages: ['@trpc/server', '@trpc/client']

testing_frameworks:
  unit_test:
    vitest:
      packages: ['vitest']
      confidence: high
    jest:
      packages: ['jest', '@jest/core']
      confidence: high
    mocha:
      packages: ['mocha']
      confidence: medium

  e2e:
    playwright:
      packages: ['@playwright/test', 'playwright']
      confidence: high
    cypress:
      packages: ['cypress']
      confidence: high

  mocking:
    msw:
      packages: ['msw']
      note: "Mock Service Worker - API 모킹"

ui_libraries:
  antd:
    packages: ['antd']
    mobile_variant: 'antd-mobile'
  mui:
    packages: ['@mui/material']
  chakra:
    packages: ['@chakra-ui/react']
  tailwind:
    packages: ['tailwindcss']
    note: "유틸리티 우선 CSS 프레임워크"
  shadcn:
    indicators:
      - packages: ['@radix-ui/react-*']
      - note: "Shadcn은 패키지명이 없고 Radix UI 기반"

database_orm:
  prisma:
    packages: ['prisma', '@prisma/client']
  typeorm:
    packages: ['typeorm']
  drizzle:
    packages: ['drizzle-orm']
  sequelize:
    packages: ['sequelize']

# 감지 로직 우선순위
detection_priority:
  1: "명시적 패키지 매칭 (high confidence)"
  2: "설정 파일 확인 (next.config.js, vite.config.ts 등)"
  3: "파일 패턴 매칭 (*.graphql, *.test.ts 등)"
  4: "기본값 추론 (medium/low confidence)"

# 특수 케이스
special_cases:
  next_fullstack:
    condition: "next 패키지 존재 + pages/api 디렉토리 존재"
    result:
      frontend: "next"
      backend: "next"

  monorepo_mixed_stack:
    condition: "여러 패키지에서 서로 다른 프레임워크 사용"
    action: "각 패키지별로 개별 기술 스택 기록"
